(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React;var a=e.n(t);const o=window.wp.i18n;class n extends a().Component{componentDidMount(){var e=this.props.data.session,t=this.props.data.gateways.ap.GatewayData,a={countryCode:e.CountryCode,sessionId:e.SessionId,amount:t.GatewayTotalAmount,currencyCode:t.GatewayCurrency,cardViewId:"mf-ap-element",callback:this.mfPaymentCallback.bind(this),style:{frameHeight:51,button:{height:"35px",text:"Pay with",borderRadius:"8px"}}};myFatoorahAP.init(a)}mfPaymentCallback(e){this.props.handel(e.sessionId),jQuery(".wc-block-components-checkout-place-order-button").click()}render(){return(0,t.createElement)("div",{id:"mf-ap-element",style:{height:"40px",marginTop:"5px"}})}}const r=n;class s extends a().Component{componentDidMount(){var e=this.props.data.session,t=this.props.data.gateways.gp.GatewayData,a={countryCode:e.CountryCode,sessionId:e.SessionId,amount:t.GatewayTotalAmount,currencyCode:t.GatewayCurrency,cardViewId:"mf-gp-element",callback:this.mfPaymentCallback.bind(this),style:{frameHeight:51,button:{height:"35px",text:"Pay with",color:"black",language:"en",borderRadius:"8px"}}};myFatoorahGP.init(a)}mfPaymentCallback(e){this.props.handel(e.sessionId),jQuery(".wc-block-components-checkout-place-order-button").click()}render(){return(0,t.createElement)("div",{id:"mf-gp-element",style:{height:"40px",marginTop:"5px"}})}}const c=s,m=function({data:e,handel:a}){const n={fontFamily:e.design.designFont,fontSize:e.design.designFontSize+"px",color:e.design.themeColor},r={fontFamily:e.design.designFont,fontSize:e.design.designFontSize+"px",color:e.design.themeColor,textAlign:"end"},s=t=>"ar"===e.mfLang?t.PaymentMethodAr:t.PaymentMethodEn,c="ar"===e.mfLang?"ar":"en";function m({mfCard:e}){return(0,t.createElement)("div",{className:"mf-card-container",title:s(e),"data-mfcardcode":e.PaymentMethodCode,"data-mfcardid":e.PaymentMethodId,onClick:()=>{return t=e.PaymentMethodId,a(t),void jQuery(".wc-block-components-checkout-place-order-button").click();var t}},(0,t.createElement)("div",{className:"mf-row-container"},(0,t.createElement)("img",{className:"mf-payment-logo",src:e.ImageUrl,alt:s(e)}),(0,t.createElement)("span",{className:"mf-card-title",style:n},s(e))),(0,t.createElement)("span",{className:"mf-price-tag",style:r},e.GatewayData.GatewayTotalAmount," ",e.GatewayData.GatewayTransCurrency[c]))}const i=null!==e.gateways.ap&&0!==e.gateways.ap.length,d=null!==e.gateways.gp&&0!==e.gateways.gp.length,l=e.gateways.cards.map((e=>(0,t.createElement)(m,{mfCard:e,key:e.PaymentMethodId})));return(0,t.createElement)("div",{id:"mf-sectionCard"},(0,t.createElement)("div",{className:"mf-divider card-divider"},(0,t.createElement)("span",{className:"mf-divider-span"},(0,t.createElement)("span",{id:"mf-or-cardsDivider"},i||d?(0,o.__)("Or ","myfatoorah-woocommerce"):""),(0,o.__)("Pay With","myfatoorah-woocommerce"))),(0,t.createElement)("div",null,l))};class i extends a().Component{componentDidMount(){this.handleFormSubmit.bind(this);var e=this.props.data,t=e.session,a=e.design,n=e.mfLang,r={countryCode:t.CountryCode,sessionId:t.SessionId,cardViewId:"mf-form-element",style:{hideCardIcons:a.hideCardIcons,cardHeight:e.isSaveCard?160:130,direction:"ar"===n?"rtl":"ltr",input:{color:a.designColor,fontSize:a.designFontSize+"px",fontFamily:a.designFont,inputHeight:"32px",inputMargin:"-1px",borderColor:a.designColor,borderWidth:"1px",borderRadius:"0px",boxShadow:"",placeHolder:{holderName:(0,o.__)("Name On Card","myfatoorah-woocommerce"),cardNumber:(0,o.__)("Number","myfatoorah-woocommerce"),expiryDate:(0,o.__)("MM / YY","myfatoorah-woocommerce"),securityCode:(0,o.__)("CVV","myfatoorah-woocommerce")}},error:{borderColor:"red",borderRadius:"8px",boxShadow:"0px"},text:{saveCard:(0,o.__)("Save card number for future payments","myfatoorah-woocommerce"),addCard:(0,o.__)("Use another card","myfatoorah-woocommerce"),deleteAlert:{tilte:(0,o.__)("Delete Card","myfatoorah-woocommerce"),message:(0,o.__)("Are you sure you want to remove this card?","myfatoorah-woocommerce"),confirm:(0,o.__)("Yes","myfatoorah-woocommerce"),cancel:(0,o.__)("No","myfatoorah-woocommerce")}}}};myFatoorah.init(r)}handleFormSubmit(e){e.preventDefault(),this.props.handel(""),this.props.error("");var t=this;myFatoorah.submit(t.props.data.currency).then((function(e){t.props.handel(e.sessionId),jQuery(".wc-block-components-checkout-place-order-button").click()}),(function(e){t.props.error(e),jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery("#payment-method").first().offset().top},2e3),jQuery(".wc-block-components-checkout-place-order-button").click()}))}render(){var e=this.props.data.gateways;const a=null!==e.ap,n=null!==e.gp,r=e.cards.length>0;var s=this.props.data.design;return(0,t.createElement)("div",{id:"mf-sectionForm"},(0,t.createElement)("div",{class:"mf-divider"},(0,t.createElement)("span",{class:"mf-divider-span"},(0,t.createElement)("span",{id:"mf-or-formDivider"},a||n||r?(0,o.__)("Or ","myfatoorah-woocommerce"):""),(0,o.__)("Insert Card Details","myfatoorah-woocommerce"))),(0,t.createElement)("div",{id:"mf-form-element"}),(0,t.createElement)("button",{class:"mf-pay-now-btn",onClick:e=>this.handleFormSubmit(e),style:{backgroundColor:s.themeColor}},(0,t.createElement)("span",{class:"mf-pay-now-span",style:{fontFamily:s.designFont,fontSize:s.designFontSize+"px"}},(0,o.__)("Pay Now","myfatoorah-woocommerce"))))}}const d=i,l=function(){jQuery(document).ready((function(e){e(".wc-block-components-checkout-place-order-button").hide(),e("input[name=radio-control-wc-payment-method-options]").on("change",(function(){"myfatoorah_v2"===this.value?e(".wc-block-components-checkout-place-order-button").hide():e(".wc-block-components-checkout-place-order-button").show()}))}))},p=window.wc.wcSettings.getPaymentMethodData("myfatoorah_v2"),y=()=>window.wp.htmlEntities.decodeEntities(p.description),u=p.error?()=>{const e=window.wp.htmlEntities.decodeEntities(p.error);return(0,t.createElement)("font",{color:"red"},e)}:p.gateways?e=>{const[a,n]=(0,t.useState)(""),[s,i]=(0,t.useState)(""),[y,u]=(0,t.useState)(""),{eventRegistration:h,emitResponse:f,activePaymentMethod:g}=e,{onPaymentSetup:w}=h;(0,t.useEffect)((()=>{const e=w((async()=>y?{type:f.responseTypes.ERROR,message:y}:{type:f.responseTypes.SUCCESS,meta:{paymentMethodData:{mfCardData:a+"",mfData:s}}}));return()=>{e()}}),[a,s,y,f.responseTypes.ERROR,f.responseTypes.SUCCESS,w]);const b=null!==p.gateways.ap&&0!==p.gateways.ap.length,C=null!==p.gateways.gp&&0!==p.gateways.gp.length,E=p.gateways.cards.length>0,v=p.gateways.form.length>0,_=parseInt(p.design.designFontSize)+2,k={fontFamily:p.design.designFont,fontSize:_+"px",color:p.design.designColor},S={fontFamily:p.design.designFont,fontSize:_+"px"};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{id:"paymentGateways",className:"mf-payment-methods-container",style:k},(0,t.createElement)("div",{className:"mf-grey-text",style:S},(0,o.__)("How would you like to pay?","myfatoorah-woocommerce")),b?(0,t.createElement)(r,{data:p,handel:i}):"",C?(0,t.createElement)(c,{data:p,handel:i}):"",E?(0,t.createElement)(m,{data:p,handel:n}):"",v?(0,t.createElement)(d,{data:p,handel:i,error:u}):""),(0,t.createElement)(l,null))}:y,h={name:"myfatoorah_v2",label:(0,t.createElement)((()=>{const e=window.wp.htmlEntities.decodeEntities(p.title);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("img",{src:p.icon}),"  ",e)}),null),content:(0,t.createElement)(u,null),edit:(0,t.createElement)(y,null),canMakePayment:()=>!0,ariaLabel:p.title,supports:{features:p.supports}};window.wc.wcBlocksRegistry.registerPaymentMethod(h)})();